!function(d3Pointers){for(var callTemplate=function(callback,sel,d){sel=sel?"template"+(sel.match(/^[\#|\.|\:|\[]/g)?sel:" "+sel):"";var parser=new DOMParser,template=d3.select(sel)[0][0],thisSelection=d?this.datum(d):this,templateContent=template.innerHTML.replace(/\<script.*?\>.*?\<\/script\>/gi,"");parser.async=!1,thisSelection.each(function(d){for(var renderedContent=callback(templateContent,d),parsedContent=parser.parseFromString(renderedContent,"text/xml").documentElement.firstChild;parsedContent;)this.appendChild(this.ownerDocument.importNode(parsedContent,!0)),parsedContent=parsedContent.nextSibling})};pointer=d3Pointers.pop();)pointer.prototype.callTemplate=callTemplate}([d3.selection,d3.selection.enter]);